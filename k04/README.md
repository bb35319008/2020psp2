# 課題4 レポート

aa83988848 薗田光太郎

## 課題

[../sample/heights.csv]は標本全体（男性と女性合わせた14人）のデータをまとめたものである．
一方，[../sample/IDs.csv]は標本14人の学籍番号（身長データと同じ順番）である．
学籍番号を尋ねて，その学籍番号のデータがリストにあれば，学籍番号，身長，性別のデータを表示し，リストになければ，「No data」と表示せよ．

この二つのファイルを読み取り，学籍番号，身長，性別の3つをメンバーとする構造体の配列で管理するとよい．

## ソースコードの説明

1.8: char型の変数id、idfを宣言

1.9: int型の変数zを宣言し、1を代入

1.10: double型の変数gender_num、heightを宣言

1.17: データファイル名を入力させ、fname1に格納

1.18: 入力させた文字列の最後にエンターキーが入っているので、fname1の文字列の最後をヌル文字'\0'に置換

1.20: fname1で指定したファイルの先頭アドレスをファイルポインタ fp1 に読み込む

1.21: もしfp1がNULLだったときは、ファイルを開けなかったので、即座にプログラム終了

1.27: データファイル名を入力させ、fname2に格納

1.28: 入力させた文字列の最後にエンターキーが入っているので、fname2の文字列の最後をヌル文字'\0'に置換

1.30: fname2で指定したファイルの先頭アドレスをファイルポインタ fp2 に読み込む

1.31: もしfp1がNULLだったときは、ファイルを開けなかったので、即座にプログラム終了

1.36: idを入力させる

1.38: fname1のファイルを1行ずつbuf1に読み込む。

1.39: i=0;i<15;i++の条件のもとで以下を繰り返す

1.40: fname1のファイルを1行ずつ", "で区切り左側を配列gender、右側を配列heightsに読み込む

1.43: 変数iに1を代入

1.45: fname2のファイルを1行ずつbuf2に読み込む。もし読み込み成功する限り以下を繰り返す

1.46: buf2からscanfで数値文字列を文字列としてidfに読み込む

1.48: もしidとidfが等しかったとき、以下を実行

1.49: 変数gender_numにgender[i]を代入（iの宣言時i=1としてheights.csvの無関係な1行目を飛ばせるようにする）

1.50: 変数heightにheights[i]を代入

1.51: z--を実行

1.53: もしidとidfが等しくない限りi++とz++を実行

1.59: fname2のファイルを閉じる。閉じれないときは、即座にプログラム終了

1.64: fname1のファイルを閉じる。閉じれないときは、即座にプログラム終了

1.71: もし変数zが14であるなら文字列"No data"を出力

1.74: もし変数zが14でないなら以下を実行

1.75: 変数idを出力

1.76: もしgender_numが1のときは"Male"、2のときは"Female"と出力

1.82: 変数heightを出力

## 入出力結果

例えば，ID 45313125のデータを調べたいとき，

```
Input the filename of sample height : ../sample/heights.csv
Input the filename of sample ID : ../sample/IDs.csv
Which ID's data do you want? : 45313125
---
ID : 45313125
gender : Female
height : 152.4
```

例えば，ID 45313124のデータを調べたいとき，

```
Input the filename of sample height : ../sample/heights.csv
Input the filename of sample ID : ../sample/IDs.csv
Which ID's data do you want? : 45313124
---
No data
```

## 修正履歴

[comment #20200721 moto]
- 提出前に一度コンパイルして、実行してみましょう。出力がおかしいなと思うと思います。
  
- 39行目　fscanf(fp1, "%d, %lf", &gender[16], &heights[16]);　
  とありますが、gender[16]や、heights[16]は定義されていないのでおかしいです。
  また、この1行だけだと、fp1の値すべては取得することができません。
  参考ですが、
    for(i=0;i<15;i++)
       fscanf(fp1, "%d, %lf", &gender[i], &heights[i]);
  みたいに書くと、それぞれの値を配列に保存することができます。
  教科書に配列の仕組みが書かれてると思うので、見てみてください。

- 43行目 if(id[9] == idf[9]){とありますが、
  宣言はid[9]ですが、実際に使用できるのはid[0]~id[8]まで
  です。(idf[9]も同様)